{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/mainshop.css' %}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <title>Магазин</title>
  </head>

  <body>
    <script type="text/javascript">
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          const cookies = document.cookie.split(";");
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === name + "=") {
              cookieValue = decodeURIComponent(
                cookie.substring(name.length + 1)
              );
              break;
            }
          }
        }
        return cookieValue;
      }
      const csrftoken = getCookie("csrftoken");
    </script>

    <div class="wrapper">
      <div class="content">
        <div class="container">
          <header class="header">
            <div class="header__container">
              <div class="header__info">
                <div class="header__logo">
                  <img src="{% static 'img/jpg/logo.jpg' %}" alt="" />
                </div>
                <div class="header__desc">
                  <div class="header__title">
                    <img src="{% static 'img/svg/body hunter.svg' %}" alt="" />
                  </div>
                  <div class="header__subtitle">Начни охоту на свое тело</div>
                </div>
              </div>
              <div class="header__btn">
                <div class="header__cart">
                  <img src="{% static 'img/svg/Iconcart.svg' %}" alt="" />
                </div>
                <p>Корзина</p>
              </div>
            </div>
          </header>
          <main class="shop-space">
            <section class="search-space">
              <div class="search-space__container">
                <div class="search-space__sort-search-space">
                  <div class="search-space__sort-block">
                  </div>
                  <div class="search-space__search-block">
                    <input
                      placeholder="Введите название продукта..."
                      class="search-space__input"
                      type="text"
                    />
                  </div>
                </div>
              </div>
            </section>
            <section class="products">
              <div class="products__container">
                {% for product in products %}
                <div class="products__block">
                  <div class="products__img">
                    <img src="{{product.image.url}}" alt="" />
                  </div>
                  <div class="products__info">
                    <p class="products__name">{{product.name}}</p>
                    <div class="products__price-btn">
                      <p class="products__price">Цена : {{product.price}}₽</p>
                      <div
                        data-product="{{product.id}}"
                        data-action="add"
                        class="products__btn"
                      >
                        в корзину
                      </div>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </section>
            <section class="pagination">
              <div class="pagination__container">
                <div class="pagination__blocks">
                  <div class="left-arr">
                    <img src="{% static 'img/svg/Iconl.svg' %}" alt="" />
                  </div>
                  {% if not page_obj.has_other_pages %}
                  <a class="pagination__block pagination__block-selected" href="?page={{page_obj.number}}">{{page_obj.number}}</a>
                  {% elif page_obj.has_next and page_obj.has_previous %}
                  <a class="pagination__block" href="?page={{page_obj.previous_page_number}}">{{page_obj.previous_page_number}}</a>
                  <a class="pagination__block pagination__block-selected" href="?page={{page_obj.number}}">{{page_obj.number}}</a>
                  <a class="pagination__block" href="?page={{page_obj.next_page_number}}">{{page_obj.next_page_number}}</a>
                  {% elif page_obj.has_next %}
                  <a class="pagination__block pagination__block-selected" href="?page={{page_obj.number}}">{{page_obj.number}}</a>
                  <a class="pagination__block" href="?page={{page_obj.next_page_number}}">{{page_obj.next_page_number}}</a>
                  {% elif page_obj.has_previous %}
                  <a class="pagination__block" href="?page={{page_obj.previous_page_number}}">{{page_obj.previous_page_number}}</a>
                  <a class="pagination__block pagination__block-selected" href="?page={{page_obj.number}}">{{page_obj.number}}</a>
                  {% endif %}
                  <div class="right-arr">
                    <img src="{% static 'img/svg/Iconr.svg' %}" alt="" />
                  </div>
                </div>
              </div>
            </section>
          </main>
        </div>
      </div>
    </div>
    <script type="text/javascript" src="{% static 'js/scripts.js' %}"></script>
  </body>
</html>
